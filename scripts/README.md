# RatSLAM Scripts

This folder contains utility scripts for processing data in the RatSLAM pipeline.

## Suggested Folder Structure
ratslam/
â”œâ”€â”€ ğŸ“ scripts/ # Main script location
â”‚ â”œâ”€â”€ ğŸ“„ extract_gps_data.py        # Extract GPS to csv 
â”‚ â””â”€â”€ ğŸ“„ extract_topics.py          # Extract data from topological messages to csv files
â”‚ â””â”€â”€ ğŸ“„ extract_nodes_edges_map.py # Extract data from topological map message
â”‚ â””â”€â”€ ğŸ“„ show_deadereckoning.m      # Plot odometry without correction 
â”‚ â””â”€â”€ ğŸ“„ lat_long_to_cartesian.m    # Matlab function to convert lat/lon to cartesian (m)
â”‚ â””â”€â”€ ğŸ“„ show_em.py                 # Plot experience map evolution over time
| â””â”€â”€ ğŸ“„ show_id.py                 # Plot template and experiences created over time
â”‚ â””â”€â”€ ğŸ“ exported_data/             # CSV exported data files
â”‚ â””â”€â”€ ğŸ“ output_bags/               # Bags recorded from RatSLAM
| â”‚ â””â”€â”€ ğŸ“ bag_dataset1/                    # bag ffolder example
| | | â””â”€â”€ ğŸ“„ metadata.yaml              
| | | â””â”€â”€ ğŸ“„ bag_dataset1.db3
â”‚ â””â”€â”€ ğŸ“ Figures/                   # Figures and video generated by Matlab scripts
| | â””â”€â”€ ğŸ–¼ï¸  Final_Exp_map.png               # Experience map figure
| | â””â”€â”€ ğŸ–¼ï¸  Final_Exp_map.eps
| | â””â”€â”€ ğŸï¸  experience_map_evolution.avi    # Animation video                
| | ...
| â”‚ â””â”€â”€ ğŸ“ map_evolution/           # To save partial figures of map evolution                           

### Core Requirements
- Python 3.8+
- pip package manager

### ROS 2 Dependencies
- ROS 2 Humble or Rolling (recommended)
- `rosbag2` package:
  ```bash
  sudo apt-get install ros-$ROS_DISTRO-rosbag2

## Scripts Overview

### `extract_gps_data.py`
Extracts GPS data from ROS 2 bag files and exports it to CSV format.


#### Usage:
```bash
python3 extract_gps_data.py <path_to_ros2_bag> --topic <gps_topic_name> --gps_data <output_csv_path>
```

#### Parameters:
| Argument          | Type    | Default      | Description                                           |
|-------------------|---------|--------------|-------------------------------------------------------|
| `input_path`      | string  | -            | Path to ROS 2 bag folder (must contain metadata.yaml) |
| `--topic`, `-t`   | string  | `/gps/fix`   | ROS topic to process                                  |
| `output_path`     | string  | `gps.csv`    | output file for gps data CSV                          |

#### Example:

```bash
python3 extract_gps_data.py ../../../bags/20250416_131706_bag_ros2 --topic /surveyor/gps_fix --gps_data exported_data/gps.csv
```




